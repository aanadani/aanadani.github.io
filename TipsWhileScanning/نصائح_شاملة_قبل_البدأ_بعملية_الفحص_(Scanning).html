<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>نصائح شاملة قبل البدأ بعملية الفحص (Scanning)</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  <script></script>
</head>
<body><div class="page"><h1 class="title">نصائح شاملة قبل البدأ بعملية الفحص (Scanning)</h1><br/><br /><br />عند إجراء عملية الفحص (scanning) ، يجب على المخترق ملاحظة وتدوين بعض النصائح المساعدة التي تضمن له النجاح في هذه العملية ، كما يجب أيضا معرفة ما الذي يحدث على النظام المستهدف (target systems) .. لذا لنبدأ بهذه المعلومات التي يجب علينا وضعها في عين الاعتبار <br /><br />1) بالعادة افحص رقم ال IP وليس الاسم (لفحص السيرفر وليس الويب) :<br /><br />- ف مثلا اذا اردت فحص موقع معين بدلا من كتابة اسمه www.google.com اكتب رقم الآي بي الخاص به 8.8.8.8 . عند استخدام أداة الnmap يفضّل أن يكون شكل الأمر كالتالي : nmap -sS -sV 8.8.8.8 <br /><br />= ما الفائدة من هذه الخطوة أو ما الذي سيحدث لو قمت بضبط الأداة لفحص الاسم بدلا من رقم الآي بي ؟ <br />    ببساطة قد يكون للاسم أكثر من آي بي واحد ، فمثلا <a href="http://www.google.com">www.google.com</a> لديه اثنان DNS IPv4 address : 8.8.8.8 , 8.8.4.4 ف بالتالي قد تقوم الأداة بفحص أي آي بي منهم مما يؤدي الى انخفاض الدقة في النتائج . على سبيل المثال قمت بالأمر التالي : nmap -sS -sV <a href="http://www.google.com">www.google.com</a> وأظهرت النتائج وجود خدمة http apache ف لن تستطيع معرفة ل أي آي بي هذه النتائج ، وعلى هذا الحدث لن تستطيع إكمال باقي عمليات الاختراق .<br /><br />- أما إذا اردت فحص محتويات الموقع على جهاز الضحية (السيرفر) ، هنا العكس يكون أفضل ب كتابة اسم الدومين <br /><br /><br />2) التعامل مع عدد كبير من الأهداف مثل فحص 1000 مضيف مثلا مع جميع المنافذ (65536 لل TCP و 65535 لل UDP) [بمعنى هناك نوعين من المنافذ الTCP والUDP]<br /><br />- إذا استغرقت العملية ثانية واحدة لكل منفذ ، ستسغرق العملية حوالي 131 مليون ثانية بمعنى 4.15 سنة (65353*2*1000) . فحتى إذا استطعت فحص 100 منفذ بالثانية سيبقى لك 15 يوم لفحص باقي المنافذ وهنا تعد معضلة <br /><br />- ف ماذا اذا حاولت فحص 10.000 او 100.000 جهاز بدلا من 1000 (في حالة كانت شركة ضخمة) ؟<br /><br />= هناك عدة حلول ولكن لكل منها سلبياتها لكن لنبدأ بالحل الأول : <br /><br />أ) فحص أهم المنافذ والأكثر استعمالا على سبيل المثال : TCP 21,22,23,25,80,135,137,139,443,445 الخ.. <br /><br />- سلبياتها أنه إذا كان هناك منفذ مفتوح ولكن المخترق لم يحسبه مثلا منفذ 324 SSH  فلن يستطيع معرفة ذلك . <br />- ال nmap يفحص أهم المنافذ بشكل افتراضي فمثلا الأمر : nmap -sS 192.168.74.110 يفحص تلك المنافذ<br /><img src="images/1-1.png" alt="images/1-1.png" /><br /><br />ب) استخدام طرق لفحص المنافذ بسرعة فائقة <br /><br />- مثلا فحص الهدف بأكثر من جهاز ف مثلا لو كان الهدف 1000 جهاز وكان لديك 5 أجهزة ف كل جهاز يدخل في عملية الفحص عليه فحص 200 جهاز فقط <br /><br />- او تسريع معدل إرسال الPackets من الجهاز الفاحص (scanner) الى الجهاز المستهدف ولكن قد ينتج عنها خسارة بعض ال packets <br /><br />- الاقتراب من جهاز الهدف قدر الامكان والهدف من هذه الخطوة الاقتراب من الشبكة الخاصة به مع نطاق ترددي أعلى (higher bandwidth)<br /><br />جـ) سلبيات هذه التقنية أنها قد تؤدي إلى هجوم حجب الخدمة (Denial Of Service) بسبب إرسال Packets بمجموعة ضخمة إلى الهدف <br /><br />3) إستخدام أدوات سنيفنج (Sniffing) :<br /> <br />- لمراقبة ما يخرج ويدخل من Packets لجهاز الضحية للتأكد من أن الأدوات تعمل بشكل منطقي<br /><br />- ولتعطي فكرة عن سلوك الجهاز المستهدف مع الPacket المرسلة <br /><br />- بالعادة لا تحتاج الى التقاط جميع الpackets وتخزنها في القرص الصلب لأنها ستأخذ مساحة كبيرة وبدلا من ذلك ، لا تحفظها ولكن اعرضها على الشاشة ومن أهم الأدوات المساعدة لهذه الخطوة الWireshark .<br /><img src="images/1-2.png" alt="images/1-2.png" /> <br /><br />- أي أداة سنيفنج (sniffing) تستخدم ؟ <br />    أي أداة تعرض ال packet headers ستكون كافية لكن ستحتاج شيء ذو حجم صغير ومرن وسريع وبهذه المواصفات أداة tcpdump ستكون مثالية <br /><br />4) استخدم الtcpdump <br />- أداة مجانية مفتوحة المصدر ولديها نسخة للويندوز تحت اسم WinDump <br />- <a href="http://www.tcpdump.org">www.tcpdump.org</a> , <a href="http://www.winpcap.org/windump/default.htm">www.winpcap.org/windump/default.htm</a><br /><img src="images/1-3.png" alt="images/1-3.png" /><br /><br />- خلال عملية الفحص حتى الاختراق ستعرض كل ال packets الخارجة والداخلة لجهازك (الجهاز الفاحص) <br /><br />5) خيارات مساعدة عند استخدام أداة الtcpdump في مرحلة الفحص (scanning) <br />- بالعادة استخدام الtcpdump بدون أي خيارات (options) يعطي معلومات كافية <br />$ sudo tcpdump<br /><img src="images/1-4.png" alt="images/1-4.png" /><br /><br />- لكن قد تحتاج للاعتماد على بعض الخيارات المتنوعة سنذكر بعض منها : <br />    -n : استخدام الأرقام بدلا من الأسماء للأجهزة <br />    -nn : استخدام الأرقام للأجهزة والمنافذ بدلا من الأسماء <br />    -i : يلتقط باكيتات من على منفذ معين <br />    -v : لتكون النتائج أكثر ترتيبا <br />    -w : لحفظ النتائج في ملف <br />    -X : إظهار الباكيت بالآسكي (ASCII) <br /><br />- بعض المصطلحات التي يجب معرفتها عند استخدام الtcpdump في مرحلة الفحص :<br />    - البروتوكول : ethernet , ip , ip6 , arp , rarp , tcp , and udp <br />    - الأنواع : <br />                 = ال host ويعطي فقط الباكتس (packets) إلى او من ذلك الجهاز<br />                 = ال net : يلتقط الباكتس (packets) من تلك الشبكة فقط <br />                 = ال port : يلتقط فقط الباكتس (packets) المرتبطة بذلك المنفذ <br />    - الاتجاه : <br />                 = ال Src : فقط تعطيني الباكتس (packets) من ذلك الجهاز او المنفذ <br />                 = ال Dst : فقط تعطيني الباكتس إلى ذلك الجهاز <br />    - استخدام “and” أو “or” لتدمج المصطلحات المذكورة فوق مع بعضها البعض .<br />    - استخدام “not” للإلغاء <br />    <br />6) استخدام الtcpdump : <br />    - إظهار كل ال TCP Packets من الهدف 10.10.10.10 بصيغة الآسكي ASCII وال Hex <br />         # tcpdump -nnx tcp and dst 10.10.10.10<br />    - إظهار كل ال UDP Packets من الهدف 10.10.10.10 <br />        # tcpdump -nn udp and src 10.10.10.10<br />     - إظهار كل ال TCP Packets من المنفذ 80 الذاهبة والداخلة للجهاز 10.10.10.10 <br />        # tcpdump -nn tcp and port 80 and host 10.10.10.10 <br />        <br />في هذا المقال الحصري تم شرح أهم النصائح التي يجب أخذها في عين الاعتبار أثناء القيام بعملية الفحص ، منها كيف يتم التعامل مع عدد كبير من الأهداف واستخدام أدوات السنيفنج (sniffing) مع شرح الخيارات وطرق الاستخدام بالاضافة الى معرفة أهمية هذه الأدوات لضمان نجاح عملية الاختراق . </div></body></html>